<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Windows System | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Windows System | Evergine Doc ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
  
  <meta property="docfx:rel" content="../../../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="windows-system">Windows System</h1>

<p>One of the main features that XRV offers is the <em>Windows System</em>, that helps you with built-in windows which contents can be customized by your own. It also includes built-in
alert and confirmation dialogs, that you can include within your UI logic to notify or ask for confirmation to application users, and execute some logic or another based on their decisions.</p>
<p><img src="images/windows_system_main.jpg" alt="dialogs snapshot"></p>
<h2 id="windows-interaction">Windows interaction</h2>
<p>When a window is created, it will include some default buttons that allows users to modify window behavior or visibility.</p>
<ul>
<li>Window position behavior can be changed, you can choose how window is placed relative to the user. To change position mode, just use window button to toggle between following behaviors:
<ul>
<li><img src="images/follow.png" alt="window follow"> Follow mode: window will follow the user wherever he moves if he goes away by a distance higher than 0.6 meters. In this mode, window will also change its orientation to face the user if he moves around.</li>
<li><img src="images/pin.png" alt="window pin"> Pinned mode: when switched to this mode, window will stay in the position and orientation that button has when pressed. In this mode, user can also manipulate position and orientation of the window, using pinch gesture on surface area of the window, including both title bar and contents area.</li>
</ul>
</li>
<li>Press <img src="images/close.png" alt="window close"> to close the window.</li>
</ul>
<h2 id="create-and-show-a-window-programmatically">Create and show a window programmatically</h2>
<p>To create a window, you can do it accessing <em>Windows System</em> that is exposed by <em>XrvService</em>. This window creation have a callback to configure the window, with different options that we will enumerate in section below. You can create as many windows as you want.</p>
<pre><code class="lang-csharp">var xrv = Application.Current.Container.Resolve&lt;XrvService&gt;();
var windowSystem = xrv.WindowSystem;

// Setting Window
var window = xrv.WindowSystem.CreateWindow(config =&gt;
{
    config.Title = &quot;Window #1&quot;;
    config.Size = new Vector2(0.3, 0.2);
});

// Show window (empty in this case)
window.Open();
</code></pre>
<p>Windows include different built-in parts and layers:</p>
<ul>
<li>Title bar: this is on the top of the window, also contains action buttons on right side of the window.</li>
<li>Back plate: it has the same material than title bar, and the unique content that it includes is an optional logo image.</li>
<li>Front plate: it will be drawn over back plate, and is intended to be placed behind window contents.</li>
</ul>
<p><img src="images/windows_system_window_parts.jpg" alt="dialogs snapshot"></p>
<h3 id="window-instance-options">Window instance options</h3>
<p>Each window instance that is returned by <em>Windows System</em> offers a set of options that developers can change by their own criteria. You can also open or close any window programmatically or subscribe to events about that window being opened or closed.</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AllowPin</code></td>
<td>If this option is disabled, default toggle button to let user change window positioning behavior that we commented above, will not be available for a window instance.</td>
</tr>
<tr>
<td><code>DistanceKey</code></td>
<td>This lets developers to specify the distance key that will be used to place window once opened.</td>
</tr>
<tr>
<td><code>EnableManipulation</code></td>
<td>When set to false, this option will not let users to change window orientation and positioning when pinned mode is active.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Open</code></td>
<td>Opens window instance.</td>
</tr>
<tr>
<td><code>Close</code></td>
<td>Closes window instance.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Events</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Opened</code></td>
<td>It occurs when window instance is opened.</td>
</tr>
<tr>
<td><code>Close</code></td>
<td>It occurs when window instance is closed.</td>
</tr>
</tbody>
</table>
<h3 id="window-instance-configuration">Window instance configuration</h3>
<p>On configuration callback, you can use following properties to change how window is displayed.</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content</code></td>
<td>This property lets you to set an entity that will be placed as window contents. Here you can set whatever you want: buttons, 3D text, images, etc. We will talk later about what is the easier way to layout your windows contents and how to set up window parameters like size to fits its contents.</td>
</tr>
<tr>
<td><code>DisplayFrontPlate</code></td>
<td>Front plate can be optionally hidden using this flag.</td>
</tr>
<tr>
<td><code>DisplayBackPlate</code></td>
<td>Back plate can be optionally hidden using this flag.</td>
</tr>
<tr>
<td><code>DisplayLogo</code></td>
<td>Controls logo visibility for the window. This image is located in bottom-left corner of the back plate.</td>
</tr>
<tr>
<td><code>FrontPlateOffsets</code></td>
<td>XY front plane offset relative to window back plate.</td>
</tr>
<tr>
<td><code>FrontPlateSize</code></td>
<td>Front plate width and height in meters.</td>
</tr>
<tr>
<td><code>LocalizedTitle</code></td>
<td>Lets you to specify callback function to set a <a href="../localization.html">localized title</a> for the window.</td>
</tr>
<tr>
<td><code>LogoMaterial</code></td>
<td>To change default logo image, you can set your own material here.</td>
</tr>
<tr>
<td><code>Size</code></td>
<td>You can set window width and height in meters.</td>
</tr>
<tr>
<td><code>Title</code></td>
<td>Lets you to specify a fixed title string to your window.</td>
</tr>
</tbody>
</table>
<h3 id="how-to-create-own-window-with-contents">How-to: create own window with contents</h3>
<p>If you want to create your own window, you should first know the size of its contents, but calculating this manually could be tricky. We are going to quickly explain the steps we follow in this case.</p>
<ol>
<li>Create a new scene, that will contain your window contents. Window contents will be then exported to a prefab that will be loaded as window contents.</li>
<li>Create a new mesh with <em>BorderlessFrontPlate</em> material. This plane will be a help guide just to know how contents will fit in final window.</li>
<li>Set <em>PlaneMesh</em> width and height with desired size.
<img src="images/windows_system_how-to.png" alt="windows how-to"></li>
<li>Create your window layout.</li>
<li>Create a prefab from your contents entity. Do not include guide reference in the prefab, just <em>Painter</em> entity in this case. Remember that you should not save your changes after creating the prefab.</li>
<li>Instantiate your window from code, and set its size with same values as your reference.</li>
</ol>
<pre><code class="lang-csharp">var contentsSize = new Vector2(0.214f, 0.173f);
var window = windowsSystem.CreateWindow(config =&gt; 
{
    config.Size = contentsSize;
    config.FrontPlateSize = contentsSize;
    config.Content = this.assetsService.Load&lt;Prefab&gt;(&lt;Prefab GUID here&gt;).Instantiate();
});
</code></pre>
<h2 id="built-in-dialogs">Built-in dialogs</h2>
<p><em>XRV</em> also offers two built-in dialog types that you can use to request a user action before making a decision. An important thing here
is that, unlike windows creation, there could only be a single instance of alert or confirmation dialog at the same time in the application. We limit this to
avoid dialog stacks that would make users uncomfortable while using the application.</p>
<ul>
<li>Alert dialog: this may be used to alert user about anything that happens while using the application, but where the user can choose no option, just confirm the dialog.</li>
<li>Confirmation dialog: in this case, we can use this type of dialog to ask user for confirmation about an action, for example, removing a 3D model from virtual space.</li>
</ul>
<p>Here you have an example of how use <em>Windows System</em> to show an alert or confirmation dialog.</p>
<pre><code class="lang-csharp">var dialog = windowsSystem.ShowConfirmationDialog(...); // or ShowAlertDialog
dialog.Closed += Dialog_Closed;

private void Dialog_Closed(object sender, EventArgs e)
{
    if (dialog is ConfirmDialog confirm)
    {
        dialog.Closed -= this.Dialog_Closed;

        if (confirm.Result == confirm.AcceptOption.Key)
        {
            // Do something only if user taps on accept option            
        }
    }
}
</code></pre>
<p>In the sample, you can notice that we are subscribing to <em>Closed</em> event. This is safe as long as you do event unsubscription in callback method, as we only allow a single dialog opened at the time. This means, if we have other part of the code that has already opened a dialog an is waiting for the response, this new dialog opening will provoke <em>Closed</em> event to be invoked for that previously executed code.</p>
<p><em>XRV</em> dialogs have a property named <em>Result</em> that you can check to know which button has been pressed by the user.</p>
<p><strong>Alert dialog</strong></p>
<table>
<thead>
<tr>
<th>Result value</th>
<th>It</th>
</tr>
</thead>
<tbody>
<tr>
<td>AlertDialog.AcceptKey</td>
<td>When user presses dialog <em>Accept</em> button.</td>
</tr>
<tr>
<td><em>null</em></td>
<td>When user presses dialog <em>Close</em> button, or other part of the code invokes <em>ShowAlertDialog</em>.</td>
</tr>
</tbody>
</table>
<p><strong>Confirmation dialog</strong></p>
<table>
<thead>
<tr>
<th>Result value</th>
<th>It</th>
</tr>
</thead>
<tbody>
<tr>
<td>ConfirmationDialog.AcceptKey</td>
<td>When user presses dialog <em>Accept</em> button.</td>
</tr>
<tr>
<td>ConfirmationDialog.CancelKey</td>
<td>When user presses dialog <em>Cancel</em> button.</td>
</tr>
<tr>
<td><em>null</em></td>
<td>When user presses dialog <em>Close</em> button, or other part of the code invokes <em>ShowConfirmationDialog</em>.</td>
</tr>
</tbody>
</table>
<h2 id="other-things-that-you-can-do-with-windows-system">Other things that you can do with <em>Windows System</em></h2>
<p><em>Windows System</em> instance also provide two properties that may be helpful for developers:</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Distances</code></td>
<td>You can register or modify predefined window distances.</td>
</tr>
<tr>
<td><code>OverrideIconMaterial</code></td>
<td>This property allows to you to set a custom Material that will override default window logo material. So, you don't need to go instance by instance replacing default logo material.</td>
</tr>
</tbody>
</table>
<h3 id="window-distances-definition">Window distances definition</h3>
<p><em>XRV</em> provides a set of predefined window distances, but you can add as many as you want to your application.</p>
<table>
<thead>
<tr>
<th>Distance key</th>
<th>Value (in meters)</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NearKey</code></td>
<td>0.35</td>
<td>This is the distance used by default for alert and confirmation dialogs.</td>
</tr>
<tr>
<td><code>MediumKey</code></td>
<td>0.5</td>
<td>This is the distance used by default for rest of the windows.</td>
</tr>
<tr>
<td><code>FarKey</code></td>
<td>1</td>
<td>This is not used at all by built-in elements of <em>XRV</em> but you can use it by your own purpose.</td>
</tr>
</tbody>
</table>
<p>To override or add a new distance, you can use <em>SetDistance</em> method.</p>
<pre><code class="lang-csharp">// override an existing key
windowsSystem.Distances.SetDistance(Xrv.Core.UI.Windows.Distances.NearKey, 0.45f);

// adding a new key
windowsSystem.Distances.SetDistance(&quot;custom&quot;, 0.5f);

// use distance key in a window
window.DistanceKey = &quot;custom&quot;;
</code></pre>
<h2 id="examples">Examples</h2>
<h3 id="get-windows-system-in-component">Get Windows System in component</h3>
<pre><code class="lang-csharp">public MyComponent : Component 
{
    [BindService]
    private XrvService xrvService = null;

    private windowSystem =&gt;  xrvService.WindowSystem;

    private void ShowAlert()
    {
        var dialog = this.windowSystem.ShowAlertDialog(&quot;Alert Title&quot;, &quot;Sample Content.&quot;, &quot;OK&quot;);
        dialog.Closed += this.OnAlertClosed();
    }

    private void ShowConfirmation()
    {
        var dialog = this.windowSystem.ShowConfirmationDialog(&quot;Confirmation Title&quot;, &quot;Sample Content.&quot;, &quot;No&quot;, &quot;Yes&quot;);
        dialog.Closed += this.OnConfirmationClosed();
    }

    private void OnAlertClosed(object sender, EventArgs e)
    {
        if (sender is AlertDialog dialog) 
        {
            dialog.Closed -= this.OnAlertClosed();
        }
    }

    private void OnConfirmationClosed(object sender, EventArgs e)
    {
        if (sender is ConfirmationDialog dialog) 
        {
            dialog.Closed -= this.OnConfirmationClosed();
        }
    }
}
</code></pre>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>

    <script type="text/javascript" src="../../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>

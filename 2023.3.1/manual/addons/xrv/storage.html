<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Storage | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Storage | Evergine Doc ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
  
  <meta property="docfx:rel" content="../../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="storage">Storage</h1>

<p>If you need an external repository to load your models, images or other type of files, that are required by your application, you can take a look to what <em>XRV</em> offers about files storage. Base class for storage systems is <em>FileAccess</em> class, that can be extended to create specific implementations for a full CRUD access to files in a repository or folder.</p>
<h2 id="file-access">File access</h2>
<p>We provide a set implementations for <em>FileAccess</em> that we are going to enumerate. Following set of methods will be available when using any file access instance from code.</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ClearAsync</strong></td>
<td>Clears all files and directories.</td>
</tr>
<tr>
<td><strong>CreateBaseDirectoryIfNotExistsAsync</strong></td>
<td>Ensure that base directory defined by <em>BaseDirectory</em> exits. If it does not exists, directory is created.</td>
</tr>
<tr>
<td><strong>CreateDirectoryAsync</strong></td>
<td>Creates a directory, indicated by relative path.</td>
</tr>
<tr>
<td><strong>DeleteDirectoryAsync</strong></td>
<td>Deletes a directory, indicated by relative path.</td>
</tr>
<tr>
<td><strong>DeleteFileAsync</strong></td>
<td>Deletes a file, indicated by relative path.</td>
</tr>
<tr>
<td><strong>GetFileAsync</strong></td>
<td>Gets file contents by relative path.</td>
</tr>
<tr>
<td><strong>GetFileItemAsync</strong></td>
<td>Gets file metadata by relative path.</td>
</tr>
<tr>
<td><strong>EnumerateDirectoriesAsync</strong></td>
<td>Enumerates directories existing in base directory or in a relative directory path.</td>
</tr>
<tr>
<td><strong>EnumerateFilesAsync</strong></td>
<td>Enumerates files existing in base directory or in a relative directory path.</td>
</tr>
<tr>
<td><strong>ExistsDirectoryAsync</strong></td>
<td>Checks if a directory, indicated by relative path, exits or not.</td>
</tr>
<tr>
<td><strong>WriteFileAsync</strong></td>
<td>Writes file contents by relative path.</td>
</tr>
</tbody>
</table>
<h3 id="local-application-data-folder-storage">Local application data folder storage</h3>
<p>This is implemented by <em>ApplicationDataFileAccess</em>, which sets as base path the value of <em>System.Environment.SpecialFolder.LocalApplicationData</em>, that can change depending on target platform. If, you create a new file access instance of this type, just set <em>BaseDirectory</em> value to a name for a base directory for that instance. You can use this file access as data cache or to create temporary files needed by your application, but may not be externally available depending on target platform.</p>
<pre><code class="lang-csharp">var fileAccess = new ApplicationDataFileAccess()
{
    BaseDirectory = &quot;my-folder&quot;,
};
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>We use some folders internally, so be careful and do not use a <em>&quot;cache</em>&quot; as base directory name.</p>
</div>
<h3 id="azure-blobs-data-storage">Azure Blobs data storage</h3>
<p>You can also use <em>Azure Blob Storage</em> as data source to download files required by your application. Only thing you need is to add some storage account configuration settings when instancing a file access of this type. You may find different static methods to create instances, depending on set of configuration data you want to provide.</p>
<p>Please, note that some directory methods may not work for this file access, as <em>Azure Blob Storage</em> does not have the concept of <em>directory</em>. When using SAS, remember that you should add appropiate permissions to the token, if you want full CRUD access to blobs.</p>
<pre><code class="lang-csharp">var fileAccess = AzureBlobFileAccess.CreateFromConnectionString(&quot;Storage account connection string&quot;, &quot;Container name&quot;); //or
var fileAccess = AzureBlobFileAccess.CreateFromUri(&quot;https://&lt;ACCOUNT&gt;.blob.core.windows.net/container?sv=2021-08-06&amp;st=2022-11-18T15%3A07%3A20Z&amp;...&quot;); // Container URI containing SAS (or without SAS for public containers, if you need read-only operations)
var fileAccess = AzureBlobFileAccess.CreateFromConnectionString(&quot;https://&lt;ACCOUNT&gt;.blob.core.windows.net/container&quot;, &quot;sv=2021-08-06&amp;st=2022-11-18T15%3A07%3A20Z&amp;...&quot;);  // Container URI with separated SAS
</code></pre>
<h3 id="azure-files-data-storage">Azure Files data storage</h3>
<p>We have support for other service, <em>Azure Files</em> that you can use. In the same way, you need to specify connection configuration data to make. You may find different static methods to create instances, depending on set of configuration data you want to provide.</p>
<pre><code class="lang-csharp">var fileAccess = AzureFileShareFileAccess.CreateFromConnectionString(&quot;Storage account connection string&quot;, &quot;Share name&quot;); //or
var fileAccess = AzureFileShareFileAccess.CreateFromUri(&quot;https://&lt;ACCOUNT&gt;.file.core.windows.net/share?sv=2021-08-06&amp;st=2022-11-18T15%3A07%3A20Z&amp;...&quot;); // Share URI containing SAS
var fileAccess = AzureFileShareFileAccess.CreateFromConnectionString(&quot;https://&lt;ACCOUNT&gt;.file.core.windows.net/share&quot;, &quot;sv=2021-08-06&amp;st=2022-11-18T15%3A07%3A20Z&amp;...&quot;);  // Share URI with separated SAS
</code></pre>
<h2 id="disk-cache">Disk cache</h2>
<p>Any <em>FileAccess</em> can use an optional cache, that will check for files locally instead of downloading them again. To activate caching for a file access, just create an instance of <em>DiskCache</em> and assign it.</p>
<pre><code class="lang-csharp">var fileAccess = AzureFileShareFileAccess.CreateFromUri(...);
fileAccess.Cache = new DiskCache(&quot;images&quot;); // indicate an unique cache name for your needs
</code></pre>
<p>For cache, you can specify following settings.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>SizeLimit</td>
<td>Cache size limit. Defaults to 100 MB.</td>
</tr>
<tr>
<td>SlidingExpiration</td>
<td>Maximum time an item remains in cache without being accessed.</td>
</tr>
</tbody>
</table>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>

    <script type="text/javascript" src="../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>

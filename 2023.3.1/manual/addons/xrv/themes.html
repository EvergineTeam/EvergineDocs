<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Themes System | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Themes System | Evergine Doc ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
  
  <meta property="docfx:rel" content="../../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="themes-system">Themes System</h1>

<p>If you need to customize colors used by your application, you should know that <em>XRV</em> uses a system for application theming. A palette of colors is defined by generic color names.</p>
<table>
<thead>
<tr>
<th>Color</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PrimaryColor1</strong></td>
<td>Used for windows title bar plate, text color for light buttons, lists selected item background color.</td>
</tr>
<tr>
<td><strong>PrimaryColor2</strong></td>
<td>Color applied to scroll bar color.</td>
</tr>
<tr>
<td><strong>PrimaryColor3</strong></td>
<td>This color is for global texts and for active items in a tab control.</td>
</tr>
<tr>
<td><strong>SecondaryColor1</strong></td>
<td>Color for inactive items in tab controls, backplate color for some buttons, text color for selections, some manipulators, etc.</td>
</tr>
<tr>
<td><strong>SecondaryColor2</strong></td>
<td>Color applied to some manipulators.</td>
</tr>
<tr>
<td><strong>SecondaryColor3</strong></td>
<td>Applies to accept option backplate in confirmation dialogs.</td>
</tr>
<tr>
<td><strong>SecondaryColor4</strong></td>
<td>Windows front plate gradient start and plate color for dialog buttons.</td>
</tr>
<tr>
<td><strong>SecondaryColor5</strong></td>
<td>Windows front plate gradient end.</td>
</tr>
</tbody>
</table>
<p>Associated to these built-in colors, we provide a set of materials that you should use in your custom UI elements if you need to make use of themes and change default set of colors provided by <em>XRV</em>.</p>
<p><img src="images/themes_default_materials.png" alt="Theme default materials"></p>
<p>Depending on values indicated in the theme, these materials are modified at runtime. As material instances are shared by different <em>MaterialComponent</em> instances, new color will be applied application wide. If you create your own materials, of course, they will be not modified by theme system. On the other hand, if you apply any of default materials in your own UI elements, they will be modified at runtime by themes system.</p>
<h2 id="modifying-a-theme-color">Modifying a theme color</h2>
<p>To change a theme color, just access to <em>ThemesSystem</em> and take a look to its <em>CurrentTheme</em> property, that you can use to modify values for current theme or assign a new <em>Theme</em> instance. A new <em>Theme</em> instance has default <em>XRV</em> colors by default. You can modify color properties to apply modifications on UI elements.</p>
<pre><code class="lang-csharp">var theme = this.xrvService.ThemesSystem.CurrentTheme;
theme.PrimaryColor1 = Color.DarkCyan;
theme.SecondaryColor4 = Color.Blue;
theme.SecondaryColor5 = Color.DarkBlue;
</code></pre>
<p><br>
For piece of code above, following changes would be presented when loading <em>XRV</em> windows and rest of visual elements.</p>
<p><img src="images/themes_custom_theme.png" alt="Theme custom colors"></p>
<p>You can have as many theme instances as you want, an switching them in <em>CurrentTheme</em> property should change colors at runtime.</p>
<h2 id="modify-a-theme-font">Modify a theme font</h2>
<p>Themes also provide a set of fonts used in different parts of UI elements.</p>
<table>
<thead>
<tr>
<th>Font</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PrimaryFont1</strong></td>
<td>Used for windows title, buttons, section labels and tab items.</td>
</tr>
<tr>
<td><strong>PrimaryFont2</strong></td>
<td>Font used for context texts, hand menu and window buttons.</td>
</tr>
</tbody>
</table>
<p>In the same way as colors, you can change these default fonts. Just add a new font asset and assign its identifier to any of the predefined font properties.</p>
<pre><code class="lang-csharp">theme.PrimaryFont1 = EvergineContent.MyCustomFont_ttf;
theme.PrimaryFont2 = EvergineContent.MyCustomFont_ttf;
</code></pre>
<h2 id="shared-text-styles">Shared text styles</h2>
<p><em>XRV</em> also tries to provide helpful ways of having uniform UI definitions. For this purpose, we have defined <em>text styles</em> that are shared globally, and that let you to define a font type, size and color, and reuse this definition and apply it to any number of 3D texts within application.</p>
<p>In each <em>TextStyle</em> instance, you can set the following.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Font</strong></td>
<td>You can optionally set a font asset identifier here as text font. This will be applied if <em>ThemeFont</em> is <em>null</em>.</td>
</tr>
<tr>
<td><strong>TextColor</strong></td>
<td>Color for the text. This will be applied if <em>ThemeColor</em> is <em>null</em>.</td>
</tr>
<tr>
<td><strong>TextScale</strong></td>
<td>Text scale for the style.</td>
</tr>
<tr>
<td><strong>ThemeColor</strong></td>
<td>This will indicate that this style will use one of theme defined colors.</td>
</tr>
<tr>
<td><strong>ThemeFont</strong></td>
<td>This will indicate that this style will use one of theme defined fonts.</td>
</tr>
</tbody>
</table>
<p>You will also find a set of built-in components to make your own 3D text to apply global styles.</p>
<ul>
<li><strong>Text3dStyle</strong>: Associates a <em>Text3DMesh</em> to a text style.</li>
<li><strong>ButtonTextStyle</strong>: Associates a text style to a <em>StandardButtonConfigurator</em> instance.</li>
<li><strong>ToggleButtonTextStyle</strong>: Associates a text style to a <em>ToggleButton</em>. You must set a component for each toggle state.</li>
</ul>
<p><img src="images/themes_use_text_styles.png" alt="Using text styles"></p>
<p>In the next table you can see the list of default text styles. As you may notice, they are all attached to theme fonts and colors.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Please, note that in this case, changing text style values will only work on application startup. We don't have support right now to do this at runtime.</p>
</div>
<table>
<thead>
<tr>
<th>Style key</th>
<th>Default values</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Xrv.Primary1.Size1</strong></td>
<td>font: ThemeFont.PrimaryFont1, scale = 0.012f,  color = ThemeColor.PrimaryColor3</td>
</tr>
<tr>
<td><strong>Xrv.Primary1.Size2</strong></td>
<td>font: ThemeFont.PrimaryFont1, scale = 0.01f,  color = ThemeColor.PrimaryColor3</td>
</tr>
<tr>
<td><strong>Xrv.Primary1.Size3</strong></td>
<td>font: ThemeFont.PrimaryFont1, scale = 0.008f,  color = ThemeColor.PrimaryColor3</td>
</tr>
<tr>
<td><strong>Xrv.Primary2.Size1</strong></td>
<td>font: ThemeFont.PrimaryFont2, scale = 0.007f,  color = ThemeColor.PrimaryColor3</td>
</tr>
<tr>
<td><strong>Xrv.Primary2.Size2</strong></td>
<td>font: ThemeFont.PrimaryFont2, scale = 0.006f,  color = ThemeColor.PrimaryColor3</td>
</tr>
<tr>
<td><strong>Xrv.Primary2.Size3</strong></td>
<td>font: ThemeFont.PrimaryFont2, scale = 0.005f,  color = ThemeColor.PrimaryColor3</td>
</tr>
</tbody>
</table>
<h3 id="add-or-modify-an-existing-text-style">Add or modify an existing text style</h3>
<p>If you need to add new styles, or modify an existing one, you can do it implementing <em>ITextStyleRegistration</em>. Its single method named <em>Register</em> passes as parameter the global styles dictionary: you can add new entries or modify existing ones.</p>
<pre><code class="lang-csharp">public MyTextStylesRegistration : ITextStyleRegistration
{
    public void Register(Dictionary&lt;string, TextStyle&gt; registrations)
    {
        // override a default style
        if (registrations.ContainsKey(DefaultTextStyles.XrvPrimary1Size1))
        {
            var defaultStyle = registrations[DefaultTextStyles.XrvPrimary1Size1];
            defaultStyle.TextScale = 0.015f;
        }

        // add a new style with theme-independent color
        registrations[&quot;RedStyle&quot;] = new TextStyle
        {
            ThemeFont = ThemeFont.PrimaryFont1,
            TextScale = 0.013f,
            Color = Color.Red,
        };
    }
}
</code></pre>
<p>As this registrations are scanned by <em>XRV</em>, you can add your own text styles, and they will be available for text styling built-in components.</p>
<h2 id="how-to-respond-to-theme-changes">How-to respond to theme changes</h2>
<p>You may be wondering what happens with custom defined materials and theme changes. As we said above, <em>Theme System</em> will not update these materials. Don't worry, as you can create your own code to control changes for themes at runtime. <em>ThemeSystem</em> counts with an event named <em>ThemeUpdated</em> that will be invoked on theme changes. It has arguments of type <em>ThemeUpdatedEventArgs</em> that contains information about theme changes.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>IsNewThemeInstance</strong></td>
<td>It indicates if message has been sent by a complete theme change (a new instance of theme has been set).</td>
</tr>
<tr>
<td><strong>Theme</strong></td>
<td>Theme instance that is being applied at the moment of message emission.</td>
</tr>
<tr>
<td><strong>UpdatedColor</strong></td>
<td>If just one of the theme colors has been updated, it indicates which one of themed colors has been involved</td>
</tr>
</tbody>
</table>
<p>So, if you want that your component listens changes on current theme (for example, to change a custom material tint color), you will need something like the following.</p>
<pre><code class="lang-csharp">public MyComponent : Component
{
    [BindService]
    private XrvService xrvService = null;
    
    private ThemesSystem themes =&gt; this.xrvService.ThemesSystem;

    protected override bool OnAttached()
    {
        bool attached = base.OnAttached();
        if (attached)
        {
            this.themes.ThemeUpdated += this.ThemesSystem_ThemeUpdated;
        }

        return attached;
    }

    
    protected override bool OnDetached()
    {        
        base.OnDetached();
        this.themes.ThemeUpdated -= this.ThemesSystem_ThemeUpdated;
    }
  
    private void ThemesSystem_ThemeUpdated(object sender, ThemeUpdatedEventArgs args)
    {
        if (args.IsNewThemeInstance)
        {
            // Respond to theme instance changes
            return;
        }

        switch (args.UpdatedColor)
        {
            case ThemeColor.PrimaryColor1:
                // Respond to PrimaryColor1 changes
                break;
            // ...
            default:
                break;
        }
    }
}
</code></pre>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>

    <script type="text/javascript" src="../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>

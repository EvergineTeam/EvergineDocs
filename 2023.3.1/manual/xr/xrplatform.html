<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>XR Platform | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="XR Platform | Evergine Doc ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.min.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
  
  <meta property="docfx:rel" content="../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="xr-platform">XR Platform</h1>

<p><strong>XRPlatform</strong> is the main service in Evergine to provide XR functionality to your applications.
This service (through its implementations) is responsible to:</p>
<ul>
<li>Create and maintain the XR session.</li>
<li>Create and maintain all required graphic resources to properly render the scene in the XR environment.</li>
<li>Update the scene Camera to track the HMD device.</li>
<li>Offer access to different XR subsystems (such as Input Tracking, Spatial Mapping, etc..)</li>
</ul>
<p><img src="images/xrsample.jpg" alt="XR Sample"></p>
<div class="NOTE">
<h5>Note</h5>
<p>Is it possible (and common), that some XRPlatform providers does not implement all functionality exposed by this service. For example: SteamVR implementation (Evergine.OpenVR extension) doesn't provide Spatial Mapping functionality or Hand Tracking)</p>
</div>
<h2 id="camera3d-and-hmd-tracking">Camera3D and HMD tracking</h2>
<p>One of the main purposes of a XR platform is to track the head position and setup properly the render output to be displayed on the HMD device.</p>
<p>With Evergine.XR, and using XRPlatform, you don't need to create special Components or instantiate XR Camera prefabs.</p>
<p>You only need to create a common <a href="../graphics/cameras.html">Camera 3D</a> of your scene, and XRPlatform will update every frame its properties to match the HMD device properties. This approach has a lot of advantages, one of them are that you can develop your application with or without XR integration without any change in your scene.</p>
<p>XRPlatform sets the following Camera properties:</p>
<ul>
<li><strong>Camera Position &amp; Orientation:</strong> Updates with the HMD device pose, including its position and orientation.</li>
<li><strong>Camera Projection:</strong> The Camera Projection properties is changed to match the projection required by the device.</li>
</ul>
<p>If you register the XRPlatform display as the default Display, the Camera will render directly to the HMD device display.</p>
<h2 id="important-properties">Important Properties</h2>
<p>You can access to useful information of the current XR session by using the following properties:</p>
<h3 id="general-properties">General properties</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Display</strong></td>
<td>Returns the display that will be configured to render in the XR device. In order to render your scene, you need to setup your camera to render in that Display. It is done by default if you register the XR Display as the &quot;DefaultDisplay&quot;</td>
</tr>
<tr>
<td><strong>MirrorDisplay</strong></td>
<td>This display will be used to mirror the content that is rendering in the XR device. Additionally, it is used too to provide access to <a href="../input/index.html">Input dispatchers</a> in your application.</td>
</tr>
<tr>
<td><strong>RenderMirrorTexture</strong></td>
<td>Boolean that indicates if you want to mirror the XR content into the Mirror Display.</td>
</tr>
<tr>
<td><strong>MSAASampleCount</strong></td>
<td>Setup the XR platform to create graphics resources using the specified MSAA Sample Count. This helps to increase the objects definition and sharpness, but reduce the application performance.</td>
</tr>
</tbody>
</table>
<h3 id="hmd-properties">HMD properties</h3>
<p>You can access to properties regarding the HMD device:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>TrackingState</strong></td>
<td>Gets the current device tracking state. It can indicates several tracking status, such as that everything is OK, or for contrary, the device is not initialized or can be out of range.</td>
</tr>
<tr>
<td><strong>HeadGaze</strong></td>
<td>Ray that point from the head position to the direction of the device is facing.</td>
</tr>
<tr>
<td><strong>EyeCount</strong></td>
<td>Number of eyes that this device will be rendered. In most common XR applications, the number is 2.</td>
</tr>
</tbody>
</table>
<h3 id="eye-gaze">Eye Gaze</h3>
<p>Some XR devices has the possibility to track the eye look direction (HoloLens2 for instance). in that cases</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>EyeGaze</strong></td>
<td>Gets a ray that indicates the position and direction that the user are looking with their eyes.</td>
</tr>
<tr>
<td><strong>IsEyeGazeValid</strong></td>
<td>Boolean that indicates if the eye gaze is providing valid values. This can be false in case that the eye is not well tracked, or in the case that the device doesn't support this feature, or doesn't have permission to track eyes.</td>
</tr>
<tr>
<td><strong>RequestEyeGazePermission()</strong></td>
<td>Async method that request the devices to grant permission to track the user eyes. It will return true only if the device supports eye gazing and the user has approved this interaction (in most of devices it is usually to show a small dialog requesting this permission).</td>
</tr>
</tbody>
</table>
<p>A small example of how to use eye gazing in your application:</p>
<pre><code class="lang-csharp">        protected override bool OnAttached()
        {
            if (base.OnAttached())
            {
                // Request eye gaze permission...
                this.RequestPermission();
                return true;
            }

            return false;
        }

        protected override void Update(TimeSpan gameTime)
        {
            if (this.xrPlatform.IsEyeGazeValid)
            {
                var eyeGaze = this.xrPlatform.EyeGaze.Value;

                // modify the transform to follow the eye gaze...
                this.transform.LocalPosition = eyeGaze.Position;
                this.transform.LookAt(eyeGaze.GetPoint(1));
            }
        }        

        private async void RequestPermission()
        {
            await this.xrPlatform.RequestEyeGazePermission();
        }
</code></pre>
<h2 id="xr-subsystems">XR Subsystems</h2>
<p>XRPlatforms allows you to access more functionality that has been described before.
In the following documents these areas will be covered:</p>
<ul>
<li><strong><a href="input_tracking/index.html">Input Tracking</a></strong></li>
<li><strong><a href="spatial_mapping.html">Spatial Mapping</a></strong></li>
<li><strong><a href="spatial_anchors.html">Spatial Anchors</a></strong></li>
</ul>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>

    <script type="text/javascript" src="../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>

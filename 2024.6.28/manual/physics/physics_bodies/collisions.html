<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Collisions | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Collisions | Evergine Doc ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.min.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
  
  <meta property="docfx:rel" content="../../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="collisions">Collisions</h1>

<p>A <strong>Collision</strong> is produced when two bodies enter in contact.</p>
<h2 id="collision-events">Collision events</h2>
<p>To listen to all collision produced in a body, a <a href="index.html">Pysic Body</a> component offers 3 events to be subscribed.</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>BeginCollision(sender, collisionInfo)</strong></td>
<td>Event fired when two objects begin a collision. This event is fired everytime that the owner body collides with a new object. This event send a <a href="#collisioninfo3d">CollisionInfo3D</a> to provide collision information.</td>
</tr>
<tr>
<td><strong>UpdateCollision(sender, collisionInfo)</strong></td>
<td>This event is fired every frame per colliding object. This event send a <a href="#collisioninfo3d">CollisionInfo3D</a> to provide collision information.</td>
</tr>
<tr>
<td><strong>EndCollision(sender, collisionInfo)</strong></td>
<td>This event is fired when a body is not yet colliding with the owner body. This event send a <a href="#collisioninfo3d">CollisionInfo3D</a> to provide collision information.</td>
</tr>
</tbody>
</table>
<h3 id="collisioninfo3d">CollisionInfo3D</h3>
<p>This class provides all collision information between two physics bodies (in physic engines, this is usually called a manifold).</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Id</strong></td>
<td>Manifold identification.</td>
</tr>
<tr>
<td><strong>State</strong></td>
<td>Indicates the state of this collision info: <code>New</code>, <code>Updated</code>, <code>Deleted</code>.</td>
</tr>
<tr>
<td><strong>ThisBody</strong></td>
<td>The owner body that produces the collision.</td>
</tr>
<tr>
<td><strong>OtherBody</strong></td>
<td>The other body that produces the collision.</td>
</tr>
<tr>
<td><strong>NumContacts</strong></td>
<td>The number of contact points.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>GetContact(contacts)</strong></td>
<td>Return all contact points (<a href="#contactpoint3d">ContactPoint3D</a>) between this two bodies in the specified collection.</td>
</tr>
<tr>
<td><strong>GetContact(index, out contact)</strong></td>
<td>Return a contact point (<a href="#contactpoint3d">ContactPoint3D</a>) specified by its index.</td>
</tr>
</tbody>
</table>
<h3 id="contactpoint3d">ContactPoint3D</h3>
<p>This structure contains all contact information produced between two objects:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Distance</strong></td>
<td>Distance of the contact point to the body surface. Some times the contact can be produced before a real contact happens. In that case is useful to check the distance value.</td>
</tr>
<tr>
<td><strong>Normal</strong></td>
<td>The normal value in the contact.</td>
</tr>
<tr>
<td><strong>PositionOnThis</strong></td>
<td>The contact position in the owner body.</td>
</tr>
<tr>
<td><strong>PositionOnOther</strong></td>
<td>The contact position in the other contacted body. This can be different, due to collider differences, margin properties among other things.</td>
</tr>
<tr>
<td><strong>ThisCollider</strong></td>
<td>The contacted collider in the owner body.</td>
</tr>
<tr>
<td><strong>OtherCollider</strong></td>
<td>The contacted collider in the other body.</td>
</tr>
</tbody>
</table>
<h3 id="using-contact-events">Using contact events</h3>
<p>Little example that shows how to use collision events (BeginCollision):</p>
<pre><code class="lang-csharp">protected override void OnActivated()
{
    base.OnActivated();

    // Subscribe to the begin collision event...
    this.rigidBody.BeginCollision += this.BeginCollision;
}

protected override void OnDeactivated()
{
    base.OnDeactivated();

    // Unsubscribe to the begin collision event...
    this.rigidBody.BeginCollision -= this.BeginCollision;
}

private void BeginCollision(object sender, CollisionInfo3D collisionInfo)
{
    var lineBatch = this.Managers.RenderManager.LineBatch3D;

    ContactPoint3D contactPoint;

    // Iterate over all contact points...
    for (int contactIndex = 0; contactIndex &lt; collisionInfo.NumContacts; contactIndex++)
    {
        if (collisionInfo.GetContact(contactIndex, out contactPoint))
        {
            // Draw the contact position
            lineBatch.DrawPoint(contactPoint.PositionOnThis, 0.2f, Color.Red);

            // Draw the contact normal
            lineBatch.DrawLine(contactPoint.PositionOnThis, contactPoint.PositionOnThis + (contactPoint.Normal * 0.5f), Color.Yellow);
        }
    }
}

</code></pre>
<h2 id="collision-filtering">Collision filtering</h2>
<p>So far in every scene we have made, all the physics bodies were able to collide with all the other bodies. That is the default behavior, but it's also possible to set up 'collision filters' to provide finer control over which bodies can collide with each other. Collision filtering is implemented by setting some properties. These flags are:</p>
<ul>
<li>CollisonCategory</li>
<li>MaskBits</li>
</ul>
<p>Both flags are a 32 bit integer so you can have up to 32 different categories for collision (<code>Cat1</code>, <code>Cat2</code>, <code>Cat3</code>, .... <code>Cat32</code>). There is a little more to it than that though, because it is the combination of these values that determines whether two bodies will collide.
Is it possible to combine some categories, and for that case there is a special value <code>All</code>, that is the aggregation of all categories.</p>
<p>The <strong>CollisionCategory</strong> flag can be thought of as the physic body saying <em>'I am a ...'</em>, and the <strong>MaskBits</strong> is like saying <em>'I will collide with a ...'</em>. The important point is that <strong>these conditions must be satisfied for both bodies in order for collision to be allowed.</strong></p>
<h2 id="collision-filtering-properties">Collision filtering properties</h2>
<p>Every physic body (static, rigid or character) has the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CollisionCategory</strong></td>
<td><code>Cat1</code></td>
<td>The CollisionCategory flag specify the category of this body.</td>
</tr>
<tr>
<td><strong>MaskBit</strong></td>
<td><code>All</code></td>
<td>The MaskBits indicates with which categories this body will collide.</td>
</tr>
</tbody>
</table>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In this article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>

    <script type="text/javascript" src="../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>

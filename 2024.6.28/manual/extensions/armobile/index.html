<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ARMobile (Experimental) | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="ARMobile (Experimental) | Evergine Doc ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.min.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
  
  <meta property="docfx:rel" content="../../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="armobile-experimental">ARMobile (Experimental)</h1>

<p><em>ARMobile</em> is an extension designed to work with augmented reality experiences, so you will need compatible devices to run these kinds of applications. Currently, the only supported platform is <em>Android (ARCore)</em>, but we also plan to support <em>iOS (ARKit)</em> in the future. ARMobile is based on the <a href="../../xr/index.html">XR Platform</a>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Please note that the <em>Evergine.ARMobile</em> extension is in an experimental state, so it has some limitations and known issues described in the <a href="#known-issues">Known issues</a> section.</p>
</div>
<h2 id="create-a-project-using-armobile">Create a Project Using ARMobile</h2>
<p>To make it easier to create <em>ARMobile</em> projects, we have developed a new project template for <em>Android ARCore</em>. It works with <em>OpenGL</em> as the graphics backend due to limitations related to <em>ARCore</em>, which does not support <em>Vulkan</em>.</p>
<p><img src="images/new-project.jpg" alt="Graphics"></p>
<p>You also need to open the <em>Evergine Studio</em> add-ons manager and add the <em>Evergine.ARMobile</em> add-on.</p>
<p><img src="images/add-addon.jpg" alt="Graphics"></p>
<p>Once <em>Evergine Studio</em> loads the default scene, you need to make some changes to ensure it works properly with <em>ARMobile</em>.</p>
<ul>
<li>For the scene's 3D camera, set the background color to #00000000 and remove the <em>FreeCameraBehavior</em> component.</li>
<li>Disable the <em>SkyAtmosphere</em> entity.</li>
<li>Go to the <em>Scene Managers</em> tab and add the <em>ARMobileManager</em> scene manager.</li>
</ul>
<p><img src="images/project-config1.jpg" alt="Graphics">
<img src="images/project-config2.jpg" alt="Graphics"></p>
<h2 id="built-in-armobile-add-on-prefabs">Built-in ARMobile Add-on Prefabs</h2>
<p>The <em>ARMobile</em> add-on provides a set of prefabs that you can use for common <em>AR</em> scenarios. Expand <em>Dependencies &gt; Evergine.ARMobile &gt; Prefabs</em> to find the following prefabs: <em>Cursor</em>, <em>Face</em>, <em>FeaturePoints</em>, <em>Image</em>, and <em>Planes</em>.</p>
<p><img src="images/add-on-prefabs.jpg" alt="Graphics"></p>
<h3 id="cursor-prefab">Cursor Prefab</h3>
<p>This prefab draws a cursor whose orientation changes depending on surface detection. Drag and drop the <em>Cursor</em> prefab into your scene and set its position to (0, 0, 0).</p>
<p><img src="images/prefab-cursor.jpg" alt="Graphics"></p>
<p>If you select the prefab entity, you will notice that apart from plane mesh components, there is an <em>ARMobileHitTestBehavior</em> that lets you choose how plane collision is detected: every frame or just when the user taps on the screen.</p>
<h3 id="face-prefab">Face Prefab</h3>
<p>The <em>Face</em> prefab allows you to use face tracking capabilities from the <em>AR</em> platform. Drag and drop the <em>Face</em> prefab to your scene and set its position to (0, 0, 0). Then, go to <em>Scene Managers</em> and check <em>FaceTrackingEnabled</em>.</p>
<p>When using face tracking detection, the rear camera is no longer used, and the front camera is used instead. Because of this, any other <em>AR</em> mode like image tracking or plane detection will not work.</p>
<p><img src="images/prefab-face.jpg" alt="Graphics"></p>
<p>If you select the prefab entity, you can use the attached <em>MaterialComponent</em> to change the face material. You will also notice a component called <em>XRFaceTrackingMesh</em> that creates a face mesh from native buffers.</p>
<h3 id="feature-points-prefab">Feature Points Prefab</h3>
<p>This prefab uses <a class="xref" href="../../../api/Evergine.Framework.Graphics.LineBatch3D.html">LineBatch3D</a> to render feature points in green, orange, or red, corresponding to more confident to less confident results. Confidence is saved in the <em>W</em> field of the <em>Points</em> property in <a class="xref" href="../../../api/Evergine.Framework.XR.FeaturePoints.XRFeaturePoints.html">XRFeaturePoints</a>. Drag and drop the <em>FeaturePoints</em> prefab to your scene, set its position to (0, 0, 0), and enable feature points detection in the <em>ARMobileManager</em> scene manager.</p>
<p><img src="images/prefab-points.jpg" alt="Graphics"></p>
<h3 id="image-prefab">Image Prefab</h3>
<p>With the image prefab, you can easily track images and place 3D objects when those images are detected, and their real-world position changes. It includes a <em>MaterialComponent</em> that you can change to use a custom material for the plane that appears once the target image has been detected. Drag and drop the <em>Image</em> prefab to your scene, set its position to (0, 0, 0), and enable image detection in the <em>ARMobileManager</em> scene manager.</p>
<p><img src="images/prefab-images.jpg" alt="Graphics"></p>
<p>Under <em>Dependencies &gt; Evergine.ARMobile &gt; AR</em>, you will find the default images dataset. It includes a single image named <em>arimage.jpg</em>. The dataset file is in <em>CSV</em> format:</p>
<ul>
<li>Each line represents a single image from the dataset.</li>
<li>The first column is the relative path to the image file. The second column is the expected image size in the real world, measured in meters. For the default image, we expect it to be 20 centimeters wide.</li>
<li>For each of the images, we use the file name (without extension) as the image name, which we internally register in the dataset database. This is why the default <em>ImageName</em> value for the <em>XRImageTracking</em> component in the <em>Image</em> prefab is <em>arimage</em>, as this is the file name for the default image in the <em>Evergine.ARMobile</em> add-on.</li>
</ul>
<p>If you want a custom set of images, create your own dataset within your project folders. Then, change the <em>ImageDataSetPath</em> value in the <em>ARMobileManager</em> scene manager to match your dataset path. To ensure your images are optimal for tracking, please follow platform recommendations:</p>
<ul>
<li>For Android: Use the <a href="https://developers.google.com/ar/develop/augmented-images/arcoreimg">arcoreimg tool</a> to evaluate your images' quality.</li>
</ul>
<h3 id="planes-prefab">Planes Prefab</h3>
<p>We provide this prefab to visualize detected planes. Drag and drop the <em>Planes</em> prefab into your scene and set its position to (0, 0, 0). Then, go to <em>Scene Managers</em> and select a plane detection mode.</p>
<p>The prefab includes a <a class="xref" href="../../../api/Evergine.Components.XR.XRPlaneRenderer.html">XRPlaneRenderer</a> that lets you change the material used to draw the planes.</p>
<h2 id="known-issues">Known Issues</h2>
<p>As the <em>ARMobile</em> extension is in an experimental state, you may encounter some issues while running applications. Here is a list of known issues:</p>
<ul>
<li>The application crashes when returning from the background.</li>
<li>In Debug configuration, you may see some <em>Google.AR.Core.Exceptions.DeadlineExceededException</em> exceptions written to the output console, depending on the <em>ARMobileManager</em> configuration.</li>
<li>When dragging AR prefabs into the scene, ensure that their <em>Transform3D</em> location is set to (0, 0, 0). Any other position could cause an <em>OpenGL</em> rendering issue resulting in a full-screen green texture.</li>
</ul>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In this article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>

    <script type="text/javascript" src="../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>

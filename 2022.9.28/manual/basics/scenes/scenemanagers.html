<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Scene Managers | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Scene Managers | Evergine Doc ">
    <meta name="generator" content="docfx 2.58.4.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="scene-managers">Scene Managers</h1>

<p>In <strong>Evergine</strong> the <strong>SceneManagers</strong> are elements that control some important aspects of the scene. They are not based as entities because they behave as a global element of the scene and cannot be attached into a specific entity.</p>
<p>All SceneManagers in a Scene can be accessed using the <code>Scene.Managers</code> property. This allow to register and access SceneManagers.</p>
<h2 id="default-scenemanagers">Default SceneManagers.</h2>
<p><strong>Evergine</strong> scenes are created with some <strong>SceneManagers</strong> by default. These are:</p>
<table>
<thead>
<tr>
<th>SceneManager</th>
<th>Access Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>EntityManager</strong></td>
<td><code>this.Managers.EntityManager</code></td>
<td>Controls the entities of the scene. More information in the <a href="../component_arch/entities/entity_manager.html">EntityManager</a> article.</td>
</tr>
<tr>
<td><strong>AssetsSceneManager</strong></td>
<td><code>this.Managers.AssetsSceneManager</code></td>
<td>Controls the asset of the scene. More information below.</td>
</tr>
<tr>
<td><strong>BehaviorManager</strong></td>
<td><code>this.Managers.BehaviorManager</code></td>
<td>Manages the behavior update execution of the scene and their priority order.</td>
</tr>
<tr>
<td><strong>RenderManager</strong></td>
<td><code>this.Managers.RenderManager</code></td>
<td>Handles the <strong>Rendering</strong> of the scene. More information in the <a href="../../graphics/rendering_overview.html">Rendering</a> article.</td>
</tr>
<tr>
<td><strong>EnvironmentManager</strong></td>
<td><code>this.Managers.EnvironmentManager</code></td>
<td>Controls the environmental information of the scene. Their Reflection Probes, their environmental radiance and irrandiance maps, etc. More information in the <a href="../../graphics/environment.html">Environment</a> article.</td>
</tr>
<tr>
<td><strong>PhysicManager3D</strong></td>
<td><code>this.Managers.PhysicManager3D</code></td>
<td>Manages the physic simulation. All the Rigid or Static bodies are registered into this manager. More information in the <a href="../../physics/physicmanager_bullet.html">Physic Manager and Bullet</a> article.</td>
</tr>
</tbody>
</table>
<div class="NOTE">
<h5>Note</h5>
<p>The <strong>PhysicsManager3D</strong> scene manager is not registered by default although in the project template it's loaded in the <strong>RegisterManagers</strong> method of the template scene class.</p>
</div>
<h3 id="assets-scene-manager">Assets Scene Manager</h3>
<p>The <strong>AssetsSceneManager</strong> controls all the asset loaded in the scene. When the scene is disposed <strong>AssetsSceneManager</strong> automatically unloads all the assets of the scene, releasing all the GPU memory in the process. More information in the <a href="../../evergine_studio/assets/use.html">Use Assets</a> article.</p>
<h2 id="create-custom-scenemanager">Create custom SceneManager</h2>
<p>In the previous section we've covered all the default <strong>SceneManagers</strong> of the scene. However you can create your own <strong>SceneManager</strong>.</p>
<p>For doing that:</p>
<ul>
<li>Create a new class in the <strong>Evergine</strong> project in the <strong>Visual Studio Solution</strong>.</li>
<li>Set that the new class inherit from <strong>SceneManager</strong> class.</li>
</ul>
<p>The new created scene manager can use all the <strong>lifecycle</strong> methods like <strong>OnAttached</strong>, <strong>OnDetach</strong>, etc. More information in <a href="../lifecycle_elements.html">Life cycle</a> article.</p>
<h3 id="updatablescenemanager">UpdatableSceneManager</h3>
<p>In addition, instead on creating a class that inherit <strong>SceneManager</strong> we can choose to inherit from <strong>UpdatableSceneManager</strong>. This class has an <strong>Update</strong> method that will be called in every frame. This is useful for managers that need to update some components in real time. For example, <strong>PhysicManager3D</strong> controls the physic simulation using this method.</p>
<h2 id="using-scenemanagers">Using SceneManagers</h2>
<h3 id="register-a-scene-manager">Register a Scene Manager</h3>
<p>We can register a new <strong>SceneManager</strong> from code like this:</p>
<pre><code class="lang-csharp">
// We can register a scene manager directly using the actual instance.
this.Managers.AddManager(new MyManager());

// Alternatively we can register by type. Useful when dealing with abstract classes.
this.Managers.AddManager&lt;PhysicsManager3D&gt;(new BulletPhysicsManager3D());

</code></pre>
<h3 id="unregister-a-scene-manager">Unregister a Scene Manager.</h3>
<p>We can also unregister calling the following function:</p>
<pre><code class="lang-csharp">
// We can remove the manager using its instance.
this.Managers.RemoveManager(myManagerInstance);

// Or the type. For example, next line will remove BulletPhysicsManager3D manager that we registered in the previous section.
this.Managers.RemoveManager&lt;PhysicsManager3D&gt;();
</code></pre>
<h3 id="obtaining-a-scenemanager">Obtaining a SceneManager</h3>
<p>We can obtain a registered <strong>SceneManager</strong> in several ways.</p>
<h4 id="using-bindscenemanager-attribute">Using [BindSceneManager] attribute</h4>
<p>With the [BindSceneManager] attribute in your Component or another custom SceneManager (See the <a href="../bindings/index.html">Binding article</a>)</p>
<pre><code class="lang-csharp">
public class MyComponent : Component 
{    
    [BindSceneManager]
    public RenderManager RenderManager;

    protected override void Start()
    {
        // Once the component is attached, the RenderManager property has being bound...
        this.RenderManager.DebugLines = true;
    }
}

</code></pre>
<h4 id="searching-the-scenemanager-directly">Searching the SceneManager directly</h4>
<p>Using the SceneManager.FindManager<t>() you can find your desired manager<p>
<pre><code class="lang-csharp">
MyManager manager = this.Managers.FindManager&lt;MyManager&gt;();

// This for example will return the BulletPhysicsManager3D registered before.
PhysicsManager3D physics = this.Managers.FindManager&lt;PhysicsManager3D&gt;();

// For default SceneManagers you can access using quick properties :)
RenderManager renderManager = this.Managers.RenderManager;

</code></pre>
<h2 id="scene-managers-in-evergine-studio">Scene managers in Evergine Studio</h2>
<p>Until <em>Evergine 2022.2.16</em>, default scene template included an entity named <em>SceneManagers</em> to configure some of built-in managers. From now, this entity is no longer included when you create a new scene, as scene managers are included in a separate panel.</p>
<p><img src="images/managers-panel.jpg" alt="Scene managers panel"></p>
<p>In that panel, you count with a user interface very similar to <em>Entity Details</em> panel, where you can manage components for an entity. In this case, you can manage scene managers for your scene. Behavior is the same: to add a new manager, just make use of add button and search for the element you want.</p>
<p><img src="images/managers-add.jpg" alt="Scene update for managers"></p>
<p>By default, managers search window will scan all available managers in your project and Evergine core libraries. If you don't want that one of your custom managers to be selectable, mark your class with <em>[Discoverable(false)]</em> attribute.</p>
<pre><code>[Discoverable(false)]
public class MyManager : SceneManager
{
}
</code></pre>
<p>To remove a manager from a scene, just right click over the element and select remove option. There are a few managers that are required for the engine to correctly work, so you should be careful about removing them. Anyways, a confirmation message will be displayed if you try to remove one of those managers.</p>
<p><img src="images/managers-remove.jpg" alt="Scene update for managers"></p>
<h3 id="migrating-older-scenes">Migrating older scenes</h3>
<p>For scenes created with Until <em>Evergine 2022.2.16</em> or below, <em>Evergine Studio</em> will ask you for asset update once you open the scene file. It will automatically copy your custom values for shadows and environment managers located in obsolete <em>SceneManagers</em> entity to scene managers saved within your scene.</p>
<p><img src="images/managers-scene-update.jpg" alt="Scene update for managers"></p>
<p>It is recommendable to confirm scene update when requested, but this process can't be undone if, for some reason, you decide to go back to <em>Evergine 2022.2.16</em>. Once scene asset is updated, <em>SceneManagers</em> entity will be removed and replaced by entries in managers file section.</p>
</t></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
          
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
              
              <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>

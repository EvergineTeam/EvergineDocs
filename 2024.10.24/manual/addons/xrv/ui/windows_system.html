<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Windows System | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Windows System | Evergine Doc ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.min.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
  
  <meta property="docfx:rel" content="../../../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="windows-system">Windows System</h1>

<p>One of the main features that XRV offers is the <em>Windows System</em>, which includes built-in windows with customizable content. It also provides built-in alert and confirmation dialogs that you can incorporate into your UI logic to notify users or ask for confirmation, allowing different actions based on user choices.</p>
<p><img src="images/windows_system_main.jpg" alt="dialogs snapshot"></p>
<h2 id="windows-interaction">Windows Interaction</h2>
<p>When a window is created, it includes default buttons that allow users to modify the window’s behavior or visibility.</p>
<ul>
<li>The window’s position can be changed, with two available positioning modes:
<ul>
<li><img src="images/follow.png" alt="window follow"> <strong>Follow mode</strong>: the window will follow the user if they move more than 0.6 meters away. In this mode, the window also reorients itself to face the user.</li>
<li><img src="images/pin.png" alt="window pin"> <strong>Pinned mode</strong>: when activated, the window remains fixed in its current position and orientation. In this mode, users can adjust the window’s position and orientation using the pinch gesture on its title bar or content area.</li>
</ul>
</li>
<li>Press <img src="images/close.png" alt="window close"> to close the window.</li>
</ul>
<h2 id="create-and-show-a-window-programmatically">Create and Show a Window Programmatically</h2>
<p>To create a window, access the <em>Windows System</em> exposed by <em>XrvService</em>. Each window has configurable options, detailed below. You can create as many windows as needed.</p>
<pre><code class="lang-csharp">var xrv = Application.Current.Container.Resolve&lt;XrvService&gt;();
var windowSystem = xrv.WindowSystem;

// Setting Window
var window = xrv.WindowSystem.CreateWindow(config =&gt;
{
    config.Title = &quot;Window #1&quot;;
    config.Size = new Vector2(0.3, 0.2);
});

// Show window (empty in this case)
window.Open();
</code></pre>
<p>Windows have several components:</p>
<ul>
<li><strong>Title bar</strong>: located at the top, it includes action buttons.</li>
<li><strong>Back plate</strong>: shares the same material as the title bar and contains an optional logo image..</li>
<li><strong>Front plate</strong>: drawn over the back plate, intended to be placed behind the window’s contents.</li>
</ul>
<p><img src="images/windows_system_window_parts.jpg" alt="dialogs snapshot"></p>
<h3 id="window-instance-options">Window Instance Options</h3>
<p>Each window instance has options that developers can customize. You can open or close any window programmatically or subscribe to events for window opening and closing.</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AllowPin</code></td>
<td>Disables the toggle button for window positioning if set to false.</td>
</tr>
<tr>
<td><code>DistanceKey</code></td>
<td>Specifies the distance key to position the window once opened.</td>
</tr>
<tr>
<td><code>EnableManipulation</code></td>
<td>Disables window orientation and positioning adjustments when pinned, if set to false.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Open</code></td>
<td>Opens the window instance.</td>
</tr>
<tr>
<td><code>Close</code></td>
<td>Closes the window instance.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Events</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Opened</code></td>
<td>Triggered when the window is opened.</td>
</tr>
<tr>
<td><code>Closed</code></td>
<td>Triggered when the window is closed.</td>
</tr>
</tbody>
</table>
<h3 id="window-instance-configuration">Window Instance Configuration</h3>
<p>Use the configuration callback to adjust the window’s display settings.</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content</code></td>
<td>Sets an entity for window contents, such as buttons, 3D text, or images.</td>
</tr>
<tr>
<td><code>DisplayFrontPlate</code></td>
<td>Hides the front plate if set to false.</td>
</tr>
<tr>
<td><code>DisplayBackPlate</code></td>
<td>Hides the back plate if set to false.</td>
</tr>
<tr>
<td><code>DisplayLogo</code></td>
<td>Toggles logo visibility on the back plate.</td>
</tr>
<tr>
<td><code>FrontPlateOffsets</code></td>
<td>XY offset of the front plate relative to the back plate.</td>
</tr>
<tr>
<td><code>FrontPlateSize</code></td>
<td>Sets width and height of the front plate in meters.</td>
</tr>
<tr>
<td><code>LocalizedTitle</code></td>
<td>Sets a <a href="../localization.html">localized title</a> callback for the window.</td>
</tr>
<tr>
<td><code>LogoMaterial</code></td>
<td>Changes the default logo image by setting a custom material.</td>
</tr>
<tr>
<td><code>Size</code></td>
<td>Defines the window’s width and height in meters.</td>
</tr>
<tr>
<td><code>Title</code></td>
<td>Specifies a fixed title string.</td>
</tr>
</tbody>
</table>
<h3 id="how-to-create-custom-window-with-contents">How-To: Create Custom Window with Contents</h3>
<p>To create a custom window, start by determining the size of its contents. Follow these steps:</p>
<ol>
<li>Create a new scene containing the window contents, which will be saved as a prefab and loaded into the window.</li>
<li>Create a mesh with <em>BorderlessFrontPlate</em> material as a size guide.</li>
<li>Adjust <em>PlaneMesh</em> width and height to the desired size.
<img src="images/windows_system_how-to.png" alt="windows how-to"></li>
<li>Design your window layout.</li>
<li>Create a prefab from your contents entity, excluding the guide reference.</li>
<li>Instantiate your window in code, setting its size to match the guide.</li>
</ol>
<pre><code class="lang-csharp">var contentsSize = new Vector2(0.214f, 0.173f);
var window = windowsSystem.CreateWindow(config =&gt; 
{
    config.Size = contentsSize;
    config.FrontPlateSize = contentsSize;
    config.Content = this.assetsService.Load&lt;Prefab&gt;(&lt;Prefab GUID here&gt;).Instantiate();
});
</code></pre>
<h2 id="built-in-dialogs">Built-In Dialogs</h2>
<p><em>XRV</em> also includes two dialog types for user prompts:</p>
<ul>
<li><strong>Alert dialog</strong>: Used to inform users without requiring them to make a choice.</li>
<li><strong>Confirmation dialog</strong>: Requests user confirmation before proceeding with an action, such as removing a 3D model.</li>
</ul>
<p>Only one dialog can be open at a time to prevent user confusion and ensure a clear interaction flow. If a new dialog is opened while another is still displayed, the existing dialog will automatically close, allowing the user to focus on the most recent prompt.</p>
<pre><code class="lang-csharp">var dialog = windowsSystem.ShowConfirmationDialog(...); // or ShowAlertDialog
dialog.Closed += Dialog_Closed;

private void Dialog_Closed(object sender, EventArgs e)
{
    if (dialog is ConfirmDialog confirm)
    {
        dialog.Closed -= this.Dialog_Closed;

        if (confirm.Result == confirm.AcceptOption.Key)
        {
            // Do something only if the user taps on the accept option            
        }
    }
}
</code></pre>
<p>In the example, we subscribe to the <em>Closed</em> event and unsubscribe in the callback. Only one dialog can be open at a time, so opening a new dialog will close any existing one.</p>
<p><strong>Alert Dialog</strong></p>
<table>
<thead>
<tr>
<th>Result Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AlertDialog.AcceptKey</td>
<td>When the user presses the dialog <em>Accept</em> button.</td>
</tr>
<tr>
<td><em>null</em></td>
<td>When the user presses the dialog <em>Close</em> button, or another part of the code invokes <em>ShowAlertDialog</em>.</td>
</tr>
</tbody>
</table>
<p><strong>Confirmation Dialog</strong></p>
<table>
<thead>
<tr>
<th>Result Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ConfirmationDialog.AcceptKey</td>
<td>When the user presses the dialog <em>Accept</em> button.</td>
</tr>
<tr>
<td>ConfirmationDialog.CancelKey</td>
<td>When the user presses the dialog <em>Cancel</em> button.</td>
</tr>
<tr>
<td><em>null</em></td>
<td>When the user presses the dialog <em>Close</em> button, or another part of the code invokes <em>ShowConfirmationDialog</em>.</td>
</tr>
</tbody>
</table>
<h2 id="additional-windows-system-features">Additional Windows System Features</h2>
<p>The <em>Windows System</em> provides additional properties for customization:</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Distances</code></td>
<td>Registers or modifies predefined window distances.</td>
</tr>
<tr>
<td><code>OverrideIconMaterial</code></td>
<td>Sets a custom material for the default window logo, avoiding per-instance updates.</td>
</tr>
</tbody>
</table>
<h3 id="window-distances-definition">Window Distances Definition</h3>
<p><em>XRV</em> includes predefined window distances, but you can add or modify distances as needed.</p>
<table>
<thead>
<tr>
<th>Distance Key</th>
<th>Value (in meters)</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NearKey</code></td>
<td>0.35</td>
<td>Default distance for alert and confirmation dialogs.</td>
</tr>
<tr>
<td><code>MediumKey</code></td>
<td>0.5</td>
<td>Default for other windows.</td>
</tr>
<tr>
<td><code>FarKey</code></td>
<td>1</td>
<td>Available for custom use.</td>
</tr>
</tbody>
</table>
<p>Override or add new distances using <em>SetDistance</em>:</p>
<pre><code class="lang-csharp">// override an existing key
windowsSystem.Distances.SetDistance(Xrv.Core.UI.Windows.Distances.NearKey, 0.45f);

// adding a new key
windowsSystem.Distances.SetDistance(&quot;custom&quot;, 0.5f);

// use distance key in a window
window.DistanceKey = &quot;custom&quot;;
</code></pre>
<h2 id="examples">Examples</h2>
<h3 id="using-the-windows-system-in-a-component">Using the Windows System in a Component</h3>
<pre><code class="lang-csharp">public MyComponent : Component 
{
    [BindService]
    private XrvService xrvService = null;

    private windowSystem =&gt;  xrvService.WindowSystem;

    private void ShowAlert()
    {
        var dialog = this.windowSystem.ShowAlertDialog(&quot;Alert Title&quot;, &quot;Sample Content.&quot;, &quot;OK&quot;);
        dialog.Closed += this.OnAlertClosed();
    }

    private void ShowConfirmation()
    {
        var dialog = this.windowSystem.ShowConfirmationDialog(&quot;Confirmation Title&quot;, &quot;Sample Content.&quot;, &quot;No&quot;, &quot;Yes&quot;);
        dialog.Closed += this.OnConfirmationClosed();
    }

    private void OnAlertClosed(object sender, EventArgs e)
    {
        if (sender is AlertDialog dialog) 
        {
            dialog.Closed -= this.OnAlertClosed();
        }
    }

    private void OnConfirmationClosed(object sender, EventArgs e)
    {
        if (sender is ConfirmationDialog dialog) 
        {
            dialog.Closed -= this.OnConfirmationClosed();
        }
    }
}
</code></pre>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In this article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>

    <script type="text/javascript" src="../../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>

<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Goal | Wave Engine API Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Goal | Wave Engine API Doc ">
    <meta name="generator" content="docfx 2.45.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="goal">Goal</h2>

<p>Within this recipe you will learn how to save your game state to persistent storage. For example, when our game is running in a mobile phone, we need save the game state when the user receives a call, due to the OS of the device can kill the game application if it needs more memory, and the user will want to resume the game in the previous state.</p>
<h2 id="hands-on">Hands-on</h2>
<h3 id="with-visual-studio-for-windows-or-mac">With Visual Studio (for Windows or Mac)</h3>
<p>WaveEngine comes with an storage service out of the box. This service manages the serialization and persistence, allowing us, for example, to store the game state. The service is based on the <a href="https://msdn.microsoft.com/es-es/library/system.runtime.serialization.datacontractserializer(v=vs.110).aspx">DataContract</a> model of .Net Framework.</p>
<p>To use it, you should declare the class which contains the state of our game.</p>
<pre><code class="lang-C#"> public class GameState
 {
     ...
     public Vector2 PlayerPosition;
     ...
 }
</code></pre><p>Now, we need to register the class and other ones used by such, in the storage service.</p>
<p>For example, we can do such in our game&#39;s <code>Game.Initialize()</code>.</p>
<pre><code class="lang-C#"> protected override void Initialize()
 {
    ...
    this.storageService = WaveServices.Storage;
    this.storageService.SetKnownTypes(new[] { typeof(GameState) });
    ...
 }
</code></pre><p>Finally, we can write and read the game state, for instance, inside the lifecycle methods of our game class:</p>
<pre><code class="lang-C#"> protected override void OnActivated()
 {
    base.OnActivated();
    ...
    if (this.storageService.Exists(&quot;GameState&quot;))
    {
        this.gameState = this.storageService.Read&lt;GameState&gt;(&quot;GameState&quot;);
        this.storageService.Delete(&quot;GameState&quot;);
    }
    ...
 }
</code></pre><pre><code class="lang-C#"> protected override void OnDeactivated()
 {
    base.OnDeactivated();
    ...
    this.storageService.Write&lt;GameState&gt;(&quot;GameState&quot;, this.gameState);
    ...
 }
</code></pre><h2 id="wrap-up">Wrap-up</h2>
<p>We have seen how to store and read the game state of our game. Using this service we can back-up such in the persistent storage.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>

<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Windows System | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Windows System | Evergine Doc ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.min.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
  
  <meta property="docfx:rel" content="../../../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="windows-system">Windows System</h1>

<p>One of the main features that XRV offers is the <em>Windows System</em>, which helps you with built-in windows whose contents can be customized by you. It also includes built-in alert and confirmation dialogs that you can include within your UI logic to notify or ask for confirmation from application users and execute some logic or another based on their decisions.</p>
<p><img src="images/windows_system_main.jpg" alt="dialogs snapshot"></p>
<h2 id="windows-interaction">Windows Interaction</h2>
<p>When a window is created, it will include some default buttons that allow users to modify window behavior or visibility.</p>
<ul>
<li>Window position behavior can be changed. You can choose how the window is placed relative to the user. To change the position mode, just use the window button to toggle between the following behaviors:
<ul>
<li><img src="images/follow.png" alt="window follow"> Follow mode: the window will follow the user wherever they move if they go farther than 0.6 meters. In this mode, the window will also change its orientation to face the user if they move around.</li>
<li><img src="images/pin.png" alt="window pin"> Pinned mode: when switched to this mode, the window will stay in the position and orientation it had when the button was pressed. In this mode, the user can also manipulate the position and orientation of the window using the pinch gesture on the surface area of the window, including both the title bar and content area.</li>
</ul>
</li>
<li>Press <img src="images/close.png" alt="window close"> to close the window.</li>
</ul>
<h2 id="create-and-show-a-window-programmatically">Create and Show a Window Programmatically</h2>
<p>To create a window, you can access the <em>Windows System</em> that is exposed by <em>XrvService</em>. This window creation has a callback to configure the window, with different options that we will enumerate in the section below. You can create as many windows as you want.</p>
<pre><code class="lang-csharp">var xrv = Application.Current.Container.Resolve&lt;XrvService&gt;();
var windowSystem = xrv.WindowSystem;

// Setting Window
var window = xrv.WindowSystem.CreateWindow(config =&gt;
{
    config.Title = &quot;Window #1&quot;;
    config.Size = new Vector2(0.3, 0.2);
});

// Show window (empty in this case)
window.Open();
</code></pre>
<p>Windows include different built-in parts and layers:</p>
<ul>
<li>Title bar: this is on the top of the window and also contains action buttons on the right side of the window.</li>
<li>Back plate: it has the same material as the title bar, and the only content it includes is an optional logo image.</li>
<li>Front plate: this will be drawn over the back plate and is intended to be placed behind window contents.</li>
</ul>
<p><img src="images/windows_system_window_parts.jpg" alt="dialogs snapshot"></p>
<h3 id="window-instance-options">Window Instance Options</h3>
<p>Each window instance that is returned by the <em>Windows System</em> offers a set of options that developers can change based on their criteria. You can also open or close any window programmatically or subscribe to events about that window being opened or closed.</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AllowPin</code></td>
<td>If this option is disabled, the default toggle button to let users change window positioning behavior, as previously mentioned, will not be available for a window instance.</td>
</tr>
<tr>
<td><code>DistanceKey</code></td>
<td>This lets developers specify the distance key that will be used to place the window once opened.</td>
</tr>
<tr>
<td><code>EnableManipulation</code></td>
<td>When set to false, this option will not let users change window orientation and positioning when the pinned mode is active.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Methods</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Open</code></td>
<td>Opens the window instance.</td>
</tr>
<tr>
<td><code>Close</code></td>
<td>Closes the window instance.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Events</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Opened</code></td>
<td>Occurs when the window instance is opened.</td>
</tr>
<tr>
<td><code>Closed</code></td>
<td>Occurs when the window instance is closed.</td>
</tr>
</tbody>
</table>
<h3 id="window-instance-configuration">Window Instance Configuration</h3>
<p>In the configuration callback, you can use the following properties to change how the window is displayed.</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content</code></td>
<td>This property lets you set an entity that will be placed as window contents. Here you can set whatever you want: buttons, 3D text, images, etc. We will talk later about the easiest way to layout your windows' contents and how to set up window parameters like size to fit its contents.</td>
</tr>
<tr>
<td><code>DisplayFrontPlate</code></td>
<td>Front plate can be optionally hidden using this flag.</td>
</tr>
<tr>
<td><code>DisplayBackPlate</code></td>
<td>Back plate can be optionally hidden using this flag.</td>
</tr>
<tr>
<td><code>DisplayLogo</code></td>
<td>Controls logo visibility for the window. This image is located in the bottom-left corner of the back plate.</td>
</tr>
<tr>
<td><code>FrontPlateOffsets</code></td>
<td>XY front plane offset relative to the window back plate.</td>
</tr>
<tr>
<td><code>FrontPlateSize</code></td>
<td>Front plate width and height in meters.</td>
</tr>
<tr>
<td><code>LocalizedTitle</code></td>
<td>Lets you specify a callback function to set a <a href="../localization.html">localized title</a> for the window.</td>
</tr>
<tr>
<td><code>LogoMaterial</code></td>
<td>To change the default logo image, you can set your own material here.</td>
</tr>
<tr>
<td><code>Size</code></td>
<td>You can set the window width and height in meters.</td>
</tr>
<tr>
<td><code>Title</code></td>
<td>Lets you specify a fixed title string for your window.</td>
</tr>
</tbody>
</table>
<h3 id="how-to-create-own-window-with-contents">How-To: Create Own Window with Contents</h3>
<p>If you want to create your own window, you should first know the size of its contents, but calculating this manually could be tricky. We are going to quickly explain the steps we follow in this case.</p>
<ol>
<li>Create a new scene that will contain your window contents. Window contents will then be exported to a prefab that will be loaded as window contents.</li>
<li>Create a new mesh with <em>BorderlessFrontPlate</em> material. This plane will help as a guide to know how contents will fit in the final window.</li>
<li>Set <em>PlaneMesh</em> width and height with the desired size.
<img src="images/windows_system_how-to.png" alt="windows how-to"></li>
<li>Create your window layout.</li>
<li>Create a prefab from your contents entity. Do not include guide reference in the prefab, just the <em>Painter</em> entity in this case. Remember that you should not save your changes after creating the prefab.</li>
<li>Instantiate your window from the code and set its size with the same values as your reference.</li>
</ol>
<pre><code class="lang-csharp">var contentsSize = new Vector2(0.214f, 0.173f);
var window = windowsSystem.CreateWindow(config =&gt; 
{
    config.Size = contentsSize;
    config.FrontPlateSize = contentsSize;
    config.Content = this.assetsService.Load&lt;Prefab&gt;(&lt;Prefab GUID here&gt;).Instantiate();
});
</code></pre>
<h2 id="built-in-dialogs">Built-In Dialogs</h2>
<p><em>XRV</em> also offers two built-in dialog types that you can use to request a user action before making a decision. An important thing here is that, unlike window creation, there can only be a single instance of an alert or confirmation dialog at a time in the application. We limit this to avoid dialog stacks that would make users uncomfortable while using the application.</p>
<ul>
<li>Alert dialog: this may be used to alert the user about anything that happens while using the application, but where the user can choose no option, just confirm the dialog.</li>
<li>Confirmation dialog: in this case, we can use this type of dialog to ask the user for confirmation about an action, for example, removing a 3D model from the virtual space.</li>
</ul>
<p>Here you have an example of how to use the <em>Windows System</em> to show an alert or confirmation dialog.</p>
<pre><code class="lang-csharp">var dialog = windowsSystem.ShowConfirmationDialog(...); // or ShowAlertDialog
dialog.Closed += Dialog_Closed;

private void Dialog_Closed(object sender, EventArgs e)
{
    if (dialog is ConfirmDialog confirm)
    {
        dialog.Closed -= this.Dialog_Closed;

        if (confirm.Result == confirm.AcceptOption.Key)
        {
            // Do something only if the user taps on the accept option            
        }
    }
}
</code></pre>
<p>In the sample, you can notice that we are subscribing to the <em>Closed</em> event. This is safe as long as you unsubscribe from the event in the callback method, as we only allow a single dialog to be open at a time. This means, if we have another part of the code that has already opened a dialog and is waiting for the response, this new dialog opening will cause the <em>Closed</em> event to be invoked for the previously opened dialog.</p>
<p><em>XRV</em> dialogs have a property named <em>Result</em> that you can check to know which button has been pressed by the user.</p>
<p><strong>Alert Dialog</strong></p>
<table>
<thead>
<tr>
<th>Result Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AlertDialog.AcceptKey</td>
<td>When the user presses the dialog <em>Accept</em> button.</td>
</tr>
<tr>
<td><em>null</em></td>
<td>When the user presses the dialog <em>Close</em> button, or another part of the code invokes <em>ShowAlertDialog</em>.</td>
</tr>
</tbody>
</table>
<p><strong>Confirmation Dialog</strong></p>
<table>
<thead>
<tr>
<th>Result Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ConfirmationDialog.AcceptKey</td>
<td>When the user presses the dialog <em>Accept</em> button.</td>
</tr>
<tr>
<td>ConfirmationDialog.CancelKey</td>
<td>When the user presses the dialog <em>Cancel</em> button.</td>
</tr>
<tr>
<td><em>null</em></td>
<td>When the user presses the dialog <em>Close</em> button, or another part of the code invokes <em>ShowConfirmationDialog</em>.</td>
</tr>
</tbody>
</table>
<h2 id="other-things-you-can-do-with-windows-system">Other Things You Can Do with <em>Windows System</em></h2>
<p>The <em>Windows System</em> instance also provides two properties that may be helpful for developers:</p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Distances</code></td>
<td>You can register or modify predefined window distances.</td>
</tr>
<tr>
<td><code>OverrideIconMaterial</code></td>
<td>This property allows you to set a custom material that will override the default window logo material. So, you don't need to go instance by instance replacing the default logo material.</td>
</tr>
</tbody>
</table>
<h3 id="window-distances-definition">Window Distances Definition</h3>
<p><em>XRV</em> provides a set of predefined window distances, but you can add as many as you want to your application.</p>
<table>
<thead>
<tr>
<th>Distance Key</th>
<th>Value (in meters)</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NearKey</code></td>
<td>0.35</td>
<td>This is the distance used by default for alert and confirmation dialogs.</td>
</tr>
<tr>
<td><code>MediumKey</code></td>
<td>0.5</td>
<td>This is the distance used by default for the rest of the windows.</td>
</tr>
<tr>
<td><code>FarKey</code></td>
<td>1</td>
<td>This is not used at all by built-in elements of <em>XRV</em> but you can use it for your own purposes.</td>
</tr>
</tbody>
</table>
<p>To override or add a new distance, you can use the <em>SetDistance</em> method.</p>
<pre><code class="lang-csharp">// override an existing key
windowsSystem.Distances.SetDistance(Xrv.Core.UI.Windows.Distances.NearKey, 0.45f);

// adding a new key
windowsSystem.Distances.SetDistance(&quot;custom&quot;, 0.5f);

// use distance key in a window
window.DistanceKey = &quot;custom&quot;;
</code></pre>
<h2 id="examples">Examples</h2>
<h3 id="get-windows-system-in-component">Get Windows System in Component</h3>
<pre><code class="lang-csharp">public MyComponent : Component 
{
    [BindService]
    private XrvService xrvService = null;

    private windowSystem =&gt;  xrvService.WindowSystem;

    private void ShowAlert()
    {
        var dialog = this.windowSystem.ShowAlertDialog(&quot;Alert Title&quot;, &quot;Sample Content.&quot;, &quot;OK&quot;);
        dialog.Closed += this.OnAlertClosed();
    }

    private void ShowConfirmation()
    {
        var dialog = this.windowSystem.ShowConfirmationDialog(&quot;Confirmation Title&quot;, &quot;Sample Content.&quot;, &quot;No&quot;, &quot;Yes&quot;);
        dialog.Closed += this.OnConfirmationClosed();
    }

    private void OnAlertClosed(object sender, EventArgs e)
    {
        if (sender is AlertDialog dialog) 
        {
            dialog.Closed -= this.OnAlertClosed();
        }
    }

    private void OnConfirmationClosed(object sender, EventArgs e)
    {
        if (sender is ConfirmationDialog dialog) 
        {
            dialog.Closed -= this.OnConfirmationClosed();
        }
    }
}
</code></pre>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In this article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>

    <script type="text/javascript" src="../../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
